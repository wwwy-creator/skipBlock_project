{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\block.js"],"names":["cc","Class","extends","Component","properties","color","default","type","Label","scoreAudio","AudioClip","getRabbitDistance","rabbitPos","game2","rabbit","getPosition","dist","node","position","sub","mag","playScoreSound","audioEngine","playEffect","onPicked","character","string","changeColor","destroy","gainScore","director","loadScene","update","dt","x"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,eAAO;AACHC,qBAAS,IADN;AAEHC,kBAAMP,GAAGQ;AAFN,SADC;AAKR;AACAC,oBAAY;AACRH,qBAAS,IADD;AAERC,kBAAMP,GAAGU;AAFD;AANJ,KAHP;;AAgBLC,uBAAmB,6BAAY;AAC3B;AACA,YAAIC,YAAY,KAAKC,KAAL,CAAWC,MAAX,CAAkBC,WAAlB,EAAhB;AACA;AACA,YAAIC,OAAO,KAAKC,IAAL,CAAUC,QAAV,CAAmBC,GAAnB,CAAuBP,SAAvB,EAAkCQ,GAAlC,EAAX;AACA,eAAOJ,IAAP;AACH,KAtBI;;AAwBLK,oBAAgB,0BAAW;AACvB;AACArB,WAAGsB,WAAH,CAAeC,UAAf,CAA0B,KAAKd,UAA/B,EAA2C,KAA3C;AACH,KA3BI;;AA6BLe,cAAU,oBAAY;AAClB;AACA,YAAI,KAAKX,KAAL,CAAWY,SAAX,CAAqBC,MAArB,IAA+B,KAAKrB,KAAL,CAAWqB,MAA9C,EAAsD;AAClD;AACA,iBAAKL,cAAL;AACA,iBAAKR,KAAL,CAAWc,WAAX;AACA;AACA,iBAAKV,IAAL,CAAUW,OAAV;AACA;AACA,iBAAKf,KAAL,CAAWgB,SAAX;AACH,SARD,MASK;AACD7B,eAAG8B,QAAH,CAAYC,SAAZ,CAAsB,OAAtB;AACH;AACJ,KA3CI;;AA6CLC,YAAO,gBAASC,EAAT,EAAY;AACf,YAAIhB,OAAO,KAAKA,IAAhB;AACA,YAAIA,KAAKiB,CAAL,GAAS,CAAC,GAAd,EAAmB;AACfjB,iBAAKiB,CAAL,IAAUD,KAAK,GAAf;AACH,SAFD,MAGK;AACD,iBAAKhB,IAAL,CAAUW,OAAV;AACH;AACD;AACA,YAAI,KAAKjB,iBAAL,KAA2B,EAA/B,EAAmC;AAC/B;AACA,iBAAKa,QAAL;AACA;AACH;AAEJ;;AA5DI,CAAT","file":"block.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        color: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        //�÷�����\r\n        scoreAudio: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n    },\r\n\r\n\r\n    getRabbitDistance: function () {\r\n        // ���� rabbit �ڵ�λ���жϾ���\r\n        var rabbitPos = this.game2.rabbit.getPosition();\r\n        // ��������λ�ü�������֮�����\r\n        var dist = this.node.position.sub(rabbitPos).mag();\r\n        return dist;\r\n    },\r\n\r\n    playScoreSound: function (){\r\n        // �����������沥������\r\n        cc.audioEngine.playEffect(this.scoreAudio, false);\r\n    },\r\n    \r\n    onPicked: function () {\r\n        //��������ȷ��ײ����ʱ\r\n        if (this.game2.character.string == this.color.string) {\r\n            // �÷�����\r\n            this.playScoreSound();\r\n            this.game2.changeColor();\r\n            // Ȼ�����ٵ�ǰ���ǽڵ�\r\n            this.node.destroy();\r\n            //�ӷ�\r\n            this.game2.gainScore();\r\n        }\r\n        else {\r\n            cc.director.loadScene(\"game3\");\r\n        }\r\n    },\r\n\r\n    update:function(dt){\r\n        var node = this.node;\r\n        if (node.x > -500) {\r\n            node.x -= dt * 150;\r\n        }\r\n        else {\r\n            this.node.destroy();\r\n        };\r\n        // ÿ֡�жϺ�����֮��ľ����Ƿ�С���ռ�����\r\n        if (this.getRabbitDistance() < 60) {\r\n            // �����ռ���Ϊ\r\n            this.onPicked();\r\n            return;\r\n        }\r\n    \r\n    },\r\n\r\n});\r\n"]}