{"version":3,"sources":["rabbit.js"],"names":["cc","Class","extends","Component","properties","jumpHeight","jumpDuration","duration","jumpAudio","default","type","AudioClip","playJumpSound","audioEngine","playEffect","setJumpAction","jumpUp","moveBy","v2","easing","easeCubicActionOut","jumpDown","easeCubicActionIn","callback","callFunc","repeatForever","sequence","setOneJumpAction","onKeyDown","event","keyCode","macro","KEY","s","node","stopAllActions","setPosition","timer","runAction","onKeyUp","scheduleOnce","onLoad","systemEvent","on","SystemEvent","EventType","KEY_DOWN","KEY_UP","onDestroy","off"],"mappings":"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","file":"rabbit.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n    \r\n    properties: {\r\n        // ������Ծ�߶�\r\n        jumpHeight: 0,\r\n        // ������Ծ����ʱ��\r\n        jumpDuration: 0,\r\n        //���̰��º����Ծ����ʱ��\r\n        duration: 0,\r\n        //��Ծ����\r\n        jumpAudio: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n\r\n    },\r\n\r\n    playJumpSound: function () {\r\n        // �����������沥������\r\n        cc.audioEngine.playEffect(this.jumpAudio, false);\r\n    },\r\n\r\n    setJumpAction: function () {\r\n        // ��Ծ����\r\n        var jumpUp = cc.moveBy(this.jumpDuration, cc.v2(0, this.jumpHeight)).easing(cc.easeCubicActionOut());\r\n        // ����\r\n        var jumpDown = cc.moveBy(this.jumpDuration, cc.v2(0, -this.jumpHeight)).easing(cc.easeCubicActionIn());\r\n        // ������Ծ����\r\n        var callback = cc.callFunc(this.playJumpSound, this);\r\n        // �����ظ�\r\n        return cc.repeatForever(cc.sequence(jumpUp, jumpDown, callback));\r\n    },\r\n\r\n    setOneJumpAction: function () {\r\n        // ������Ծ����\r\n        var callback = cc.callFunc(this.playJumpSound, this);\r\n        // ��Ծ����\r\n        var jumpUp = cc.moveBy(this.duration, cc.v2(0, 200)).easing(cc.easeCubicActionOut());\r\n        // ����\r\n        var jumpDown = cc.moveBy(this.duration, cc.v2(0, -200)).easing(cc.easeCubicActionOut());\r\n        //����\r\n        return cc.sequence(callback, jumpUp, jumpDown);\r\n    },\r\n\r\n    onKeyDown (event) {\r\n        // set a flag when key pressed\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.s: {\r\n                //ͣ��ԭ�ȵĶ���\r\n                this.node.stopAllActions();\r\n                this.node.setPosition(-360, -184);\r\n                this.timer = 0;\r\n                //��ʼ�¶���\r\n                this.node.runAction(this.setOneJumpAction());\r\n                break;\r\n            };\r\n        }\r\n    },\r\n    /**/\r\n    onKeyUp (event) {\r\n        // unset a flag when key released\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.s: {\r\n                //����released���ȴ�onKeyDown���������󣬻ָ�ԭ�ȶ���\r\n                this.scheduleOnce(function () {\r\n                    this.node.stopAllActions();\r\n                    this.node.setPosition(-360, -184);\r\n                    this.node.runAction(this.setJumpAction());\r\n                }, (this.duration * 1.6 - this.timer));\r\n                break;\r\n            };\r\n        };\r\n    },\r\n\r\n    onLoad: function () {\r\n        //��ʱ��\r\n        this.timer = 0;\r\n\r\n        // ��ʼ����Ծ����\r\n        this.node.runAction(this.setJumpAction());\r\n\r\n        // ��ʼ�������������\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    },\r\n\r\n    onDestroy () {\r\n        // ȡ�������������\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    },\r\n\r\n});\r\n"]}